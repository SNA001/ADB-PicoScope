;version 1.08, 06/02/2014, Copyright 2014 P&E Microcomputer Systems, Inc. All rights reserved. www.pemicro.com [mk_1024k_n_pflash0_pflash1]
;device freescale, k10fn1m0m12, 1x32x256k, desc=pflash
;begin_cs device=$00000000, length=$00100000, ram=$20000000
;end_cs
REQUIRES_PROG_VERSION=3.18/
NO_ON_CHIP_RAM
DO_MASS_ERASE_AND_RESET       ;Perform MDM Mass erase
NO_TIMING_TEST                ;Flash module is self clocked
RUNNING_ALGORITHM
WRITE_LONG=00FF003F/4001F000/ ;Disable Master0..2 prefetching
WRITE_LONG=30040000/4001F004/ ;Disable Cache and Prefetching on Flash Bank 0,1
WRITE_LONG=30040000/4001F008/ ;Disable Cache and Prefetching on Flash Bank 2,3
WRITE_LONG=FFFFFFFF/40020010/ ;All PFlash protection off
BLANK_MODULE_ONLY
BOUNDARY_MASK=FFFFE000/
BLOCKING_MASK=00000003/
NO_BASE_ADDRESS=00000000/
ADDR_RANGE=00000000/000FFFFF/00/FFFFFFFC/FFFFF800/     ; $00000000-$000FFFFF P-Flash
TEST_VALUE=00/0000040C/00000033/00000020/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/ 
TEST_VALUE=00/0000040C/00000033/00000021/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/ 
TEST_VALUE=00/0000040C/00000033/00000023/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/
; turn off watchdog timer
WRITE_LONG=4005200E/1FFFFF00/ ; dc32 0x4005200E      ;wdog unlock address
WRITE_LONG=40052000/1FFFFF04/ ; dc32 0x40052000      ;wdog control_h
WRITE_LONG=500CF85F/1FFFFF08/ ; ldr  r5,w_unlock_loc ;get wdog unlock address 
WRITE_LONG=600CF85F/1FFFFF0C/ ; ldr  r6,w_control_h  ;get wdog control address
WRITE_LONG=5820F24C/1FFFFF10/ ; mov  r8,#0xC520      ;get constants
WRITE_LONG=1928F64D/1FFFFF14/ ; mov  r9,#0xD928
WRITE_LONG=0A02F04F/1FFFFF18/ ; mov  r10,#0x0002
WRITE_LONG=8000F8A5/1FFFFF1C/ ; strh r8,[r5]         ;unlock wdog
WRITE_LONG=9000F8A5/1FFFFF20/ ; strh r9,[r5]
WRITE_WORD=BF00/1FFFFF24/     ; nop                  ;timing
WRITE_LONG=A000F8A6/1FFFFF26/ ; strh r10,[r6]        ;turn wdog off
WRITE_WORD=BE00/1FFFFF2A/     ; bkpt #0x0 
SET_PC_AND_RUN=1FFFFF08/      ; disable software watchdog
PUT_REGFILE=00/1FFFFF00/              ;Address in SRAM_LOW for timing routine
ICS_RANGE=000312500/000382000/000006400/ ICS Range (LSB = decimal place)
09BIT_TRIM=40064002/40064003/01/000003FF/000003FE/01400000/
;Sectors  64-4k (00..3F) PFlash0
USER=P0 Sector Erase PFl0  2Page >    /00000000/0000003F/
;Sectors  64-4k (00..3F) PFlash1
USER=P1 Sector Erase PFl1  2Page >    /00000000/0000003F/
;Sectors  64-4k (00..3F) PFlash2
USER=P2 Sector Erase PFl2  2Page >    /00000000/0000003F/
;Sectors  64-4k (00..3F) PFlash3
USER=P3 Sector Erase PFl3  2Page >    /00000000/0000003F/
USER=SD Secure Device      0          /00000000/00000000/
S02100006D6B5F313032346B5F6E5F70666C617368305F70666C617368312E73313982
S315200000000100240000000000000010005000002025
S315200000108014002000200000C034002000200000B2
S31520000020240000200D00000001020306090B0E1318
S31520000030141516173200000080340020C05400200A
S315200000400000000060040020000000000000000006
S315200000505FF80C1000291BD05FF8241001F1130162
S315200000600878A1F11301032802D002284BD0EFE72C
S31520000070AFF22C014FF000020A605FF8441001F144
S3152000008013010A705FF84C1001F113010A70DFE7C3
S315200000905FF85C1001F113010878A1F11301002823
S315200000A000D102E0FF280DD1FFE75FF8701001F1C3
S315200000B013010878A1F11301002800D1E8E7FF28F1
S315200000C000D1E5E7AFF28802116001280AD00228A4
S315200000D019D0062828D0092837D00B283BD00E283F
S315200000E046D04EE001F114015FF8C80041F8040B38
S315200000F0AFF2CC0008605FF8B81001F113014FF0A1
S3152000010000000870A4E70B6801F104010C6884EA7A
S3152000011003045FF8D41001F113014FF000000870BA
S3152000012001F101010C6093E75FF8EC0050F8041B25
S3152000013050F8042B0FF2D61808F10108C0475FF8D3
S31520000140000100F11400016078E00FF2841808F134
S315200001500108C04772E05FF8180150F8041B50F8F8
S31520000160042B03680FF2D01808F10108C04765E098
S315200001705FF8302195460FF2F80808F10108C047CC
S315200001805CE0132830D0142837D015283ED0162806
S3152000019045D017284CD032280DD0AFF254110A6022
S315200001A05FF86C1101F113010A705FF8701101F10B
S315200001B013010A704CE75FF8780150F8044B50F8A9
S315200001C0047B5FF8841101F1140151F8040BDFF868
S315200001D0748208F10108C0475FF89C1101F11401EF
S315200001E008604FF0000229E05FF8AC0104680FF2C6
S315200001F08A0808F10108C04720E05FF8BC010468BE
S315200002000FF27C0808F10108C04717E05FF8D0011B
S3152000021004680FF2720808F10108C0470EE05FF883
S31520000220E00104680FF2640808F10108C04705E000
S315200002300FF2D41808F10108C047FFE7002A0FD0B3
S315200002404FF0FF02AFF200210A605FF8141201F1AD
S3152000025013010A705FF81C1201F113010A70F7E608
S315200002605FF8241201F113010A70F1E600BE00BE08
S315200002706B4D2A7812F07002F7464FF0000307E024
S315200002804FF4802304E04FF4002301E04FF4402391
S315200002904FF4805604FB06F6194631444FF070069B
S315200002A02E7069604FF00906EE714FF080062E70B1
S315200002B000BF2E7816F08006FBD02A7812F0700246
S315200002C000D0F746002B00D0F746002C13D0F74677
S315200002D04FF070062E704FF04406EE714FF08006F8
S315200002E02E7000BF2E7816F08006FBD02A7812F0EA
S315200002F0700200D0F7464FF00402524B504FD7F809
S315200003000080484E08EA06061E604D4914E04C4E11
S315200003104FF6FF774FF6FE7931F8028BB84502D1BA
S31520000320921EF9D1F746C845FCD1A1F10201B1428E
S3152000033001F10201F4D0F74614464FF070062E70F4
S315200003403B4F01EA0707BB464FF480693E4E57F8FC
S3152000035004AB46F804ABB9F10109F8D14FF07006A9
S315200003602E70C5F804B04FF00906EE714FF08006E6
S315200003702E7000BF2E7816F08006FBD02A7812F059
S31520000380700240D1304E0F46DFF8A88007EA0807F2
S315200003903E4453F804AB46F804AB01F10401241F94
S315200003A006D04FF48058284A4244964200D0F0E7BF
S315200003B04FF48058244F4FF48059204E57F804AB01
S315200003C046F804ABB9F1040900D0F7E74FF480767C
S315200003D06E81C5F804B04FF00B06EE714FF0800623
S315200003E02E7000BF2E7816F08006FBD02A7812F0E9
S315200003F0700208D10BF5805BB8F58058B8F1000F74
S31520000400D9D1002C9CD1F7464FF004020D4B0C4F4E
S31520000410D7F80080044E08EA06061E6008498BE7D6
S3152000042000000240FEFFFFFFFCFFFFFFFFFFFFFF74
S3152000043000F0FFFFFF0F0000000000000000001486
S315200004400C0400008014002080040020001000000E
S70520000001D9
ÑF